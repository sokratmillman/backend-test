# Тестовое задание

Код написан на Python с использованием фреймворка Flask для обработки http-запросов.

Сенсоры случайным образом выбирают значение в диапазоне [-100, 100], отправляют его как payload.

Контроллер хранит общее число запросов и общий payload. Каждые 5 секунд принимается решение: если средний payload больше 0, статус будет перевед в "up" (по умолчанию статус равен "down"), после этого счетчик запросов и суммарная нагрузка обнуляются, чтобы не учитывать outdated информацию.

В логи докера каждые 5 секунд выводится получаемое манипулятором сообщение от контроллера (выводится весь JSON). В историю же записывается отредактированная информация (с объединенными интервалами), которая доступна по веб-запросу.

Web:

![](/images/Web%20logs.png)

Docker:

![](/images/Docker%20logs.png)

## Запуск

Проект запускался на Docker Compose version v2.15.0

1. Склонировать репозиторий.
2. Из корня проекта запустить `docker compose build`, таким образом соберется проект
3. `docker compose up` - запустит проект (не в фоновом режиме, логи будут появляться в терминале). История доступна в браузере по адресу `0.0.0.0:5000/history`. Так же можно запустить в фоновом режиме при помощи `docker compose up -d`, тогда логи докера будут доступны выполнением команды `docker compose logs manipulator`